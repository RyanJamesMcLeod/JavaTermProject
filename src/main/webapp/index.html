<!doctype html>
<html lang="en">
<head>
  <title>Welcome to the Term Project Forums!</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <link rel="stylesheet" type="text/css" href="css/project.css">
  <script src="http://code.jquery.com/jquery.min.js"></script>
  <script>
      $(document).ready(function() {
          var show = 'false';
              
          var forumLogin = function() {
              $.ajax({
                  url: "./r/login",
                  method: "post",
                  data: JSON.stringify({
                        "username": $('#username').val(),
                        "password": $('#password').val()
                  }),
                  dataType: "json",
                  contentType: 'application/json; charset=UTF-8',
                  success: function () {
                     window.location.assign("http://termproject-ryanmcleod.rhcloud.com/forum.html");
                  },
                  error: function(jq, status, thrown) {
                      alert (jq + "\n" + status + "\n" + thrown);
                  }
              });

          };
          $('#send').click(forumLogin);
          $('#join').hide();
          $('#appear').click(function () {
              
              if (show === 'false') {
                  $('#join').show();
                  show = 'true';
              }
              else {
                  $('#join').hide();
                  show = 'false';
              }
          });
          
          var joinForum = function() {
              $.ajax({
                  url: "./r/login/join",
                  method: "post",
                  data: JSON.stringify({
                        "username": $('#newUsername').val(),
                        "password": $('#newPassword').val()
                  }),
                  dataType: "json",
                  contentType: 'application/json; charset=UTF-8',
                  success: function () {
                     alert("Congratulations! You've signed up to the forum!");
                  },
                  error: function(jq, status, thrown) {
                      alert (jq + "\n" + status + "\n" + thrown);
                  }
              });

          };
          $('#joinForum').click(joinForum);
      });
  </script>
</head>
<body>
    <h1>Welcome to The Term Project Forums!</h1>
    <h2>Please login to enter</h2>
    <div id="forum">
        <p>Username: <input id="username" /></p>
        <p>Password: <input id="password" /></p>
        <p><button id="send">Send</button></p>
    </div>
    <button id="appear">New to the Forum? Click here to sign up!</button>
    <div id="join">
        <p>Enter your forum username: <input id="newUsername" /></p>
        <p>Please enter your password: <input id="newPassword" /></p>
        <p><button id="joinForum">Send</button></p>
    </div>
</body>
</html>
